(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d4bd"],{MTPh:function(t,e,i){"use strict";i.r(e);var s=i("Nuvt"),a=i("Yfch"),l=i("YJFt"),r=i("t3Un");i("Qyje");var n={name:"Identification",components:{InputBox:s.a,FormItem:l.a},data:function(){var t=this;return{account:"",account_id:"",creation_time:"",portrait:"",hint_title:"登录密码",hint_text:"安全性高的密码可以使账号更安全。建议您定期更换密码，设置一个包含字母、符号或数字中至少两项且长度超过6位的密码。",switchPwd:!1,telMother:"",codeMother:"",portraitBoxVisible:!1,file:"",step:"one",setPwd:{password:"",repassword:""},setPwdRules:{password:[{required:!0,trigger:["blur","change"],validator:a.d}],repassword:[{required:!0,trigger:["blur","change"],validator:function(e,i,s){""===i?s(new Error("请再次输入密码")):i!==t.addUserForm.password?s(new Error("两次密码不一致，请重新输入")):s()}}]},capthchaStatus:!1,capthchaTime:0,capthchaInterval:null}},computed:{isStepOne:function(){return"one"===this.step},isStepTwo:function(){return"two"===this.step},isStepThree:function(){return"three"===this.step},capthchaStatusTis:function(){return this.capthchaTime>0?this.capthchaTime+"S":"获取短信验证码"}},created:function(){this.security()},methods:{security:function(){var t=this;Object(r.a)({url:"/user/api/security",method:"post"}).then(function(e){"SUCCESS"===e.code&&(t.account=e.result.username,t.account_id=e.result.userId,t.telMother=e.result.mobile,t.creation_time=e.result.createTime,t.portrait=e.result.picUrl)})},handleChange:function(t,e){e.length>1&&e.shift(),this.file=t.name},submitUpload:function(){this.$refs.upload.submit()},handUpload:function(){},handNext:function(t){var e=this;"two"===t&&(alert(t),function(t,e){return Object(r.a)({url:"/user/api/check",method:"post",params:{mobile:e,code:t}})}(this.codeMother,this.telMother).then(function(i){0===i.code?e.step=t:alert("验证码错误！")})),"three"===t&&function(t){return Object(r.a)({url:"/user/api/setp",method:"post",params:t})}(this.repassword).then(function(i){0===i.code?(alert("修改密码成功！"),e.step=t):alert("修改密码失败")})},handGetCapthcha:function(){var t=this;this.capthchaStatus||(this.capthchaStatus=!0,this.capthchaTime="60",this.capthchaInterval=setInterval(function(){t.capthchaTime-=1,0===t.capthchaTime&&(clearInterval(t.capthchaInterval),t.capthchaInterval=null,t.capthchaStatus=!1)},1e3)),function(t){return Object(r.a)({url:"/user/api/code",method:"post",data:t})}(this.account).then(function(t){console.log(t.code),0===t.code&&alert("发送成功！")})},logout:function(){this.$store.dispatch("LogOut").then(function(){location.reload()})}}},o=(i("tjnN"),i("KHd+")),c=Object(o.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"change-box"},[i("div",{staticClass:"info-box"},[i("div",{staticClass:"portrait"},[i("img",{attrs:{src:t.portrait,alt:""}}),t._v(" "),i("div",{staticClass:"update",on:{click:function(e){t.portraitBoxVisible=!0}}},[t._v("修改头像")])]),t._v(" "),i("div",{staticClass:"info-item"},[i("div",{staticClass:"account"},[i("span",{staticClass:"title"},[t._v("登录账号")]),t._v(" "),i("span",{staticClass:"number"},[t._v(t._s(t.account))])]),t._v(" "),i("div",{staticClass:"account-id"},[i("span",{staticClass:"title"},[t._v("账号ID")]),t._v(" "),i("span",{staticClass:"number"},[t._v(t._s(t.account_id))])]),t._v(" "),i("div",{staticClass:"creation-time"},[i("span",{staticClass:"title"},[t._v("创建时间")]),t._v(" "),i("span",{staticClass:"number"},[t._v(t._s(t.creation_time))])])])]),t._v(" "),i("em"),t._v(" "),i("div",{staticClass:"hint"},[i("span",{staticClass:"hint-title"},[t._v(t._s(t.hint_title))]),t._v(" "),i("span",{staticClass:"hint-text"},[t._v(t._s(t.hint_text))]),t._v(" "),i("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},model:{value:t.switchPwd,callback:function(e){t.switchPwd=e},expression:"switchPwd"}})],1),t._v(" "),i("el-collapse-transition",[t.switchPwd?i("div",{staticClass:"main-box"},[i("div",{staticClass:"main-top"},[i("div",{staticClass:"title"},[t._v("修改密码")]),t._v(" "),i("div",{staticClass:"step-box"},[i("div",[i("div",{staticClass:"step-one",class:{on:t.isStepOne}},[i("div",[t._v("1")])]),t._v(" "),i("span",{staticClass:"step-explain"},[t._v("输入原密码")])]),t._v(" "),i("em",{class:{on:t.isStepOne,reon:t.isStepTwo}}),t._v(" "),i("div",[i("div",{staticClass:"step-two",class:{on:t.isStepTwo}},[i("div",[t._v("2")])]),t._v(" "),i("span",{staticClass:"step-explain"},[t._v("设置新密码")])]),t._v(" "),i("em",{class:{on:t.isStepTwo,reon:t.isStepThree}}),t._v(" "),i("div",[i("div",{staticClass:"step-three",class:{on:t.isStepThree}},[i("div",[t._v("3")])]),t._v(" "),i("span",{staticClass:"step-explain"},[t._v("完成")])])])]),t._v(" "),i("div",{staticClass:"change-form"},[t.isStepOne?i("div",{staticClass:"step-one-content"},[i("div",{staticClass:"check-info"},[t._v("手机验证码验证 账户 "),i("span",[t._v(t._s(t.account)+"}")]),t._v(" 为确认是你本人操作，请完成一下验证")]),t._v(" "),i("div",{staticClass:"phone"},[i("input-box",{staticClass:"input-box-tel",attrs:{must:!1,width:308,title:"手机号码"}},[i("elInput",{attrs:{disabled:!0,size:"mini",placeholder:"请输入"},model:{value:t.telMother,callback:function(e){t.telMother=e},expression:"telMother"}})],1)],1),t._v(" "),i("div",{staticClass:"captcha"},[i("input-box",{staticClass:"input-box-code",attrs:{must:!1,width:308,title:"验证码"}},[i("elInput",{attrs:{size:"mini",placeholder:"请输入验证码"},model:{value:t.codeMother,callback:function(e){t.codeMother=e},expression:"codeMother"}})],1),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handGetCapthcha}},[t._v(t._s(t.capthchaStatusTis))])],1),t._v(" "),i("div",{staticClass:"button-box"},[i("el-button",[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handNext("two")}}},[t._v("下一步")])],1)]):t._e(),t._v(" "),t.isStepTwo?i("div",{staticClass:"step-two-content"},[i("el-form",{ref:"setPwdForm",attrs:{model:t.setPwd,rules:t.setPwdRules,"auto-complete":"on"}},[i("div",{staticClass:"pass"},[i("input-box",{staticClass:"input-box-left",attrs:{must:!1,width:308,title:"新的登录密码"}},[i("form-item",{attrs:{prop:"password"}},[i("elInput",{attrs:{type:"password",size:"mini",placeholder:"请输入"},model:{value:t.setPwd.password,callback:function(e){t.$set(t.setPwd,"password",e)},expression:"setPwd.password"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"repass"},[i("input-box",{staticClass:"input-box-left",attrs:{must:!1,width:308,title:"确认新的登录密码"}},[i("form-item",{attrs:{prop:"repassword"}},[i("elInput",{attrs:{type:"password",size:"mini",placeholder:"请输入"},model:{value:t.setPwd.repassword,callback:function(e){t.$set(t.setPwd,"repassword",e)},expression:"setPwd.repassword"}})],1)],1)],1)]),t._v(" "),i("div",{staticClass:"button-box"},[i("el-button",[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handNext("three")}}},[t._v("下一步")])],1)],1):t._e(),t._v(" "),t.isStepThree?i("div",{staticClass:"step-three-content"},[i("div",{staticClass:"success-icon"}),t._v(" "),i("div",{staticClass:"information"},[t._v("修改成功，请牢记新的登录密码！")]),t._v(" "),i("div",{staticClass:"relogin"},[i("router-link",{attrs:{to:"/login"}},[t._v("重新登录")])],1)]):t._e()])]):t._e()]),t._v(" "),t.portraitBoxVisible?i("div",{staticClass:"update-portrait-box"},[i("div",{staticClass:"update-portrait"},[i("div",{staticClass:"select-top"},[i("div",{staticClass:"select-title"},[t._v("修改头像")]),t._v(" "),i("i",{staticClass:"el-icon-close",on:{click:function(e){t.portraitBoxVisible=!1}}})]),t._v(" "),i("div",{staticClass:"hint-msg"},[t._v("从电脑中选择一张好图作为头像吧！")]),t._v(" "),i("div",{staticClass:"inp-box"},[i("el-upload",{ref:"upload",staticClass:"file-input-box",attrs:{"on-change":t.handleChange,"file-list":t.fileList,"auto-upload":!1,action:"https://jsonplaceholder.typicode.com/posts/"}},[i("el-input",{staticClass:"file-input",attrs:{slot:"trigger",placeholder:"请选择一个文件"},slot:"trigger"},[i("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"suffix"},slot:"suffix"})]),t._v(" "),i("el-button",{on:{click:t.submitUpload}},[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"upload-tip el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("支持jpg/png格式图片，文件需小于2MB")])],1),t._v(" "),i("div",{staticClass:"button-box"},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.portraitBoxVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.handUpload()}}},[t._v("确定")])],1)],1)])]):t._e()],1)},[],!1,null,"6f0eb7d0",null);c.options.__file="index.vue";e.default=c.exports},Nuvt:function(t,e,i){"use strict";var s={name:"InputBox",props:{title:{type:String,default:""},must:{type:Boolean,default:!1},width:{type:Number,default:200}}},a=(i("Uumj"),i("KHd+")),l=Object(a.a)(s,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-box",class:{must:this.must},style:{width:this.width+"px"}},[e("div",{staticClass:"input-title"},[this._v(this._s(this.title))]),this._v(" "),this._t("default")],2)},[],!1,null,"9a9a2152",null);l.options.__file="index.vue";e.a=l.exports},Uumj:function(t,e,i){"use strict";var s=i("tB12");i.n(s).a},YJFt:function(t,e,i){"use strict";var s=i("oV5b"),a=i("9vS1"),l=i("6rf1"),r=i("a9f8"),n={name:"FormItem",componentName:"ElFormItem",mixins:[a.a],provide:function(){return{FormItem:this}},inject:["elForm"],props:{label:{type:String,default:""},labelWidth:{type:String,default:""},prop:{type:String,default:""},required:{type:Boolean,default:void 0},rules:{type:[Object,Array],default:null},error:{type:String,default:""},validateStatus:{type:String,default:""},for:{type:String,default:""},inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,default:""}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,form:null}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var t={};if("top"===this.form.labelPosition)return t;var e=this.labelWidth||this.form.labelWidth;return e&&(t.width=e),t},contentStyle:function(){var t={},e=this.label;if("top"===this.form.labelPosition||this.form.inline)return t;if(!e&&!this.labelWidth&&this.isNested)return t;var i=this.labelWidth||this.form.labelWidth;return i&&(t.marginLeft=i),t},fieldValue:function(){var t=this.form.model;if(t&&this.prop){var e=this.prop;return-1!==e.indexOf(":")&&(e=e.replace(/:/,".")),Object(r.a)(t,e,!0).v}},isRequired:function(){var t=this.getRules(),e=!1;return t&&t.length&&t.every(function(t){return!t.required||(e=!0,!1)}),e},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return this.elFormItemSize||(this.$ELEMENT||{}).size}},watch:{error:{immediate:!0,handler:function(t){this.validateMessage=t,this.validateState=t?"error":""}},validateStatus:function(t){this.validateState=t}},created:function(){for(var t=this.$parent,e=t.$options.componentName;"ElForm"!==e;)"FormItem"===e&&(this.isNested=!0),e=(t=t.$parent).$options.componentName;this.form=t},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var t=this.fieldValue;Array.isArray(t)&&(t=[].concat(t)),Object.defineProperty(this,"initialValue",{value:t}),(this.getRules().length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])},methods:{validate:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.b;this.validateDisabled=!1;var a=this.getFilteredRule(t);if((!a||0===a.length)&&void 0===this.required)return i(),!0;this.validateState="validating";var l={};a&&a.length>0&&a.forEach(function(t){delete t.trigger}),l[this.prop]=a;var n=new s.default(l),o={};o[this.prop]=this.fieldValue,n.validate(o,{firstFields:!0},function(t,s){e.validateState=t?"error":"success",e.validateMessage=t?t[0].message:"",i(e.validateMessage,s),e.elForm&&e.elForm.$emit("validate",e.prop,!t)})},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){this.validateState="",this.validateMessage="";var t=this.form.model,e=this.fieldValue,i=this.prop;-1!==i.indexOf(":")&&(i=i.replace(/:/,"."));var s=Object(r.a)(t,i,!0);this.validateDisabled=!0,Array.isArray(e)?s.o[s.k]=[].concat(this.initialValue):s.o[s.k]=this.initialValue,this.broadcast("ElTimeSelect","fieldReset",this.initialValue)},getRules:function(){var t=this.form.rules,e=this.rules,i=void 0!==this.required?{required:!!this.required}:[],s=Object(r.a)(t,this.prop||"");return t=t?s.o[this.prop||""]||s.v:[],[].concat(e||t||[]).concat(i)},getFilteredRule:function(t){return this.getRules().filter(function(e){return!e.trigger||""===t||(Array.isArray(e.trigger)?e.trigger.indexOf(t)>-1:e.trigger===t)}).map(function(t){return Object(l.a)({},t)})},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},showErrorMessage:function(t){this.validateState="error",this.validateMessage=t}}},o=i("KHd+"),c=Object(o.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"el-form-item",class:[{"el-form-item--feedback":t.elForm&&t.elForm.statusIcon,"is-error":"error"===t.validateState,"is-validating":"validating"===t.validateState,"is-success":"success"===t.validateState,"is-required":t.isRequired||t.required},t.sizeClass?"el-form-item--"+t.sizeClass:""]},[t.label||t.$slots.label?i("label",{staticClass:"el-form-item__label",style:t.labelStyle,attrs:{for:t.labelFor}},[t._t("label",[t._v(t._s(t.label+t.form.labelSuffix))])],2):t._e(),t._v(" "),i("div",{staticClass:"el-form-item__content",style:t.contentStyle},[t._t("default"),t._v(" "),i("transition",{attrs:{name:"el-zoom-in-top"}},["error"===t.validateState&&t.showMessage&&t.form.showMessage?i("div",{staticClass:"el-form-item__error",class:{"el-form-item__error--inline":"boolean"==typeof t.inlineMessage?t.inlineMessage:t.elForm&&t.elForm.inlineMessage||!1}},[t._v("\n        "+t._s(t.validateMessage)+"\n      ")]):t._e()])],2)])},[],!1,null,null,null);c.options.__file="index.vue";e.a=c.exports},inH7:function(t,e,i){},tB12:function(t,e,i){},tjnN:function(t,e,i){"use strict";var s=i("inH7");i.n(s).a}}]);